<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
	<h:head>
	    	<title>Listagem</title>
	</h:head>
<h:body>
    <h:form id="listagemForm">
        <h1>Listagem de Lançamentos</h1>
        <p:panel>
	        <p:dataTable id="listaLancamento" value="#{lancamentoBean.listaLancamento}" var="lan" rowKey="#{lan.id}" style="width: 90%; height: 70%;" selectionMode="single">
	            <!-- Colunas da tabela -->
	            <p:column headerText="ID">
	                <h:outputText value="#{lan.id}" />
	            </p:column>
	            <p:column headerText="Descrição">
	                <h:outputText value="#{lan.descricao}" />
	            </p:column>
	            <p:column headerText="Valor">
	                <h:outputText value="#{lan.valor}" />
	            </p:column>
	            <p:column headerText="Tipo">
	                <h:outputText value="#{lan.tipo}" />
	            </p:column>
	            <p:column headerText="Data">
	                <h:outputText value="#{lan.data}" />
	            </p:column>
	
	            <!-- Botões de ação (Excluir, Detalhes) -->
	            <p:column headerText="Ação">
	                <p:commandButton value="Excluir" action="#{listagemBean.excluirLancamento(lancamento)}" update="listagemForm" />
	                <p:commandButton value="Detalhes" action="#{listagemBean.exibirDetalhes(lancamento)}" update="listagemForm" />
	            </p:column>
	        </p:dataTable>
		</p:panel>
        <!-- Exibição detalhada e valores totais -->
        <p:dialog header="Detalhes do Lançamento" widgetVar="detalhesDialog" modal="true">
            <!-- Detalhes do lançamento -->
            <h:panelGrid columns="2">
                <h:outputText value="ID:" />
                <h:outputText value="#{listagemBean.lancamentoSelecionado.id}" />

                <h:outputText value="Descrição:" />
                <h:outputText value="#{listagemBean.lancamentoSelecionado.descricao}" />

                <h:outputText value="Valor:" />
                <h:outputText value="#{listagemBean.lancamentoSelecionado.valor}" />

                <h:outputText value="Tipo:" />
                <h:outputText value="#{listagemBean.lancamentoSelecionado.tipo}" />

                <h:outputText value="Data:" />
                <h:outputText value="#{listagemBean.lancamentoSelecionado.data}" />
            </h:panelGrid>

            <!-- Valores totais -->
            <h:panelGrid columns="2">
                <h:outputText value="Total de Despesas:" />
                <h:outputText value="#{listagemBean.totalDespesas}" />

                <h:outputText value="Total de Receitas:" />
                <h:outputText value="#{listagemBean.totalReceitas}" />

                <h:outputText value="Saldo:" />
                <h:outputText value="#{listagemBean.saldo}" />
            </h:panelGrid>

            <p:commandButton value="Fechar" onclick="PF('detalhesDialog').hide();" />
        </p:dialog>

        <p:commandButton value="Voltar para Cadastro" action="index.xhtml" />
    </h:form>
</h:body>
</html>